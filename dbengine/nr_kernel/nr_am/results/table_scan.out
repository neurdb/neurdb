DROP TABLE IF EXISTS x;
NOTICE:  table "x" does not exist, skipping
DROP TABLE IF EXISTS y;
NOTICE:  table "y" does not exist, skipping
CREATE TABLE x(a INT, b text, c text, PRIMARY KEY (a, b)) USING nram;
INFO:  [NRAM] calling function nram_relation_set_new_filelocator
INFO:  [NRAM] calling function nram_relation_needs_toast_table
INFO:  [NRAM] calling function nram_estimate_rel_size
INFO:  [NRAM] calling function nram_index_build_range_scan
CREATE TABLE y(a INT, b text, PRIMARY KEY (a)) USING nram;
INFO:  [NRAM] calling function nram_relation_set_new_filelocator
INFO:  [NRAM] calling function nram_relation_needs_toast_table
INFO:  [NRAM] calling function nram_estimate_rel_size
INFO:  [NRAM] calling function nram_index_build_range_scan
-- Test insert and table scan.
INSERT INTO x VALUES (1, 'k1', 'v1');
INFO:  [NRAM] calling function nram_slot_callbacks
INFO:  [NRAM] calling function nram_tuple_insert
INFO:  [NRAM] calling function nram_insert
INFO:  [NRAM] [nram_insert:239] nram tid generated as 42430
INFO:  [NRAM] calling function rocksengine_open
INFO:  [NRAM] [find_write_set:110] write_set=(nil) length=0
INFO:  [NRAM] [find_write_set:110] write_set=0x55b9997e45e8 length=1
INFO:  [NRAM] [nram_insert:247] ADD! key = <16411:42430>
INFO:  [NRAM] [nram_xact_callback:189] The callback is triggered on event PRE_COMMIT
INFO:  [NRAM] [nram_xact_callback:205] Pre-validation add write locks.
INFO:  [NRAM] [nram_xact_callback:230] Post-validation release write locks.
INFO:  [NRAM] [nram_xact_callback:238] Validation succeed.
INFO:  [NRAM] [nram_xact_callback:189] The callback is triggered on event COMMIT
INFO:  [NRAM] [nram_xact_callback:250] the transaction 766 is committed
SELECT * from x;
INFO:  [NRAM] calling function nram_estimate_rel_size
INFO:  [NRAM] calling function nram_slot_callbacks
INFO:  [NRAM] calling function nram_beginscan
INFO:  [NRAM] calling function nram_getnextslot
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
connection to server was lost
